<!doctype html>
<html lang="ja">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>é«˜åº¦ãªå•†å“ç®¡ç† | åˆ‡æ‰‹è²©å£²ã‚·ãƒ§ãƒƒãƒ—</title>
        <link rel="icon" type="image/svg+xml" href="icon.svg">
        <link rel="icon" type="image/x-icon" href="favicon.ico">
        <link rel="stylesheet" href="css/tailwind-compiled.css?v=20250713-1">
        <style>
            body {
                font-family:
                    'Hiragino Kaku Gothic ProN', 'ãƒ’ãƒ©ã‚®ãƒè§’ã‚´ ProN', 'ãƒ¡ã‚¤ãƒªã‚ª', Meiryo, 'MS Pã‚´ã‚·ãƒƒã‚¯', sans-serif;
            }
            .preview-image {
                width: 200px;
                height: 200px;
                object-fit: cover;
                border-radius: 8px;
            }
            /* ãƒ‰ãƒ©ãƒƒã‚°ã‚ªãƒ¼ãƒãƒ¼æ™‚ã®ã‚¹ã‚¿ã‚¤ãƒ« */
            #drop-zone.drag-over {
                border-color: #3b82f6;
                background-color: #dbeafe;
                transform: scale(1.02);
            }
            /* ãƒ‰ãƒ­ãƒƒãƒ—ã‚¾ãƒ¼ãƒ³ã®ãƒ›ãƒãƒ¼åŠ¹æœ */
            #drop-zone:hover {
                border-color: #6b7280;
                background-color: #f9fafb;
            }
            /* ä»®æƒ³ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ç”¨ã®ã‚¹ã‚¿ã‚¤ãƒ« */
            .virtual-scroll-container {
                height: 600px;
                overflow-y: auto;
                position: relative;
            }
            .virtual-scroll-content {
                position: relative;
            }
            .product-item {
                position: absolute;
                width: 100%;
            }
        </style>
        <!-- Firebase SDK -->
        <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
        <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
        <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
        <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-storage-compat.js"></script>
        <script src="/firebase-config.js"></script>
        <script src="/js/auth-manager.js"></script>
        <script src="/js/unified-storage.js"></script>
        <script src="/js/paginated-storage.js"></script>
        <script src="/js/image-uploader.js"></script>
    </head>
    <body class="bg-gray-100">
        <script>
            // AuthManagerã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹
            let authManager;

            // ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡ã¨åˆæœŸåŒ–
            window.addEventListener('DOMContentLoaded', async () => {
                authManager = new AuthManager();

                // èªè¨¼ãƒã‚§ãƒƒã‚¯
                const isAuthenticated = await authManager.requireAuth();
                if (!isAuthenticated) {
                    return; // èªè¨¼ã•ã‚Œã¦ã„ãªã„å ´åˆã¯è‡ªå‹•çš„ã«ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆã•ã‚Œã‚‹
                }

                // æ—¢å­˜ã®åˆæœŸåŒ–å‡¦ç†ã‚’å®Ÿè¡Œ
                if (typeof initializeApp === 'function') {
                    initializeApp();
                }
            });

            // ãƒ­ã‚°ã‚¢ã‚¦ãƒˆæ©Ÿèƒ½
            async function logout() {
                if (authManager) {
                    await authManager.logout();
                }
                window.location.href = 'admin-login.html';
            }
        </script>
        <div class="container mx-auto px-4 py-8 max-w-7xl">
            <!-- ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ -->
            <div class="flex justify-between items-center mb-4">
                <a href="index.html" class="text-sm text-gray-600 hover:text-[#C41E3A] underline">
                    â† ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸ã«æˆ»ã‚‹
                </a>
                <div class="flex gap-4">
                    <a href="admin.html" class="text-sm text-gray-600 hover:text-[#C41E3A] underline">
                        ã‚·ãƒ³ãƒ—ãƒ«ç®¡ç†ç”»é¢
                    </a>
                    <button onclick="logout()" class="text-sm text-gray-600 hover:text-[#C41E3A] underline">
                        ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ
                    </button>
                </div>
            </div>
            <!-- ã‚¿ãƒ–ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ -->
            <div class="bg-white rounded-t-lg shadow-md mb-0">
                <nav class="flex border-b">
                    <a href="admin.html" class="px-6 py-3 text-gray-600 hover:text-gray-800 border-b-2 border-transparent hover:border-gray-300">
                        å•†å“ç™»éŒ²
                    </a>
                    <a href="admin-categories.html" class="px-6 py-3 text-gray-600 hover:text-gray-800 border-b-2 border-transparent hover:border-gray-300">
                        ã‚«ãƒ†ã‚´ãƒªãƒ¼ç®¡ç†
                    </a>
                    <span class="px-6 py-3 text-[#C41E3A] font-semibold border-b-2 border-[#C41E3A]">
                        é«˜åº¦ãªç®¡ç†
                    </span>
                </nav>
            </div>
            
            <div class="bg-white rounded-b-lg shadow-lg p-6 mb-6">
                <h1 class="text-2xl font-bold text-gray-800">é«˜åº¦ãªå•†å“ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ </h1>
            </div>

            <!-- çµ±è¨ˆæƒ…å ±ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ -->
            <div class="bg-white rounded-lg shadow-md p-6 mb-6">
                <h2 class="text-xl font-semibold mb-4">çµ±è¨ˆæƒ…å ±</h2>
                <div id="statistics" class="grid grid-cols-2 md:grid-cols-4 gap-4">
                    <!-- çµ±è¨ˆæƒ…å ±ãŒã“ã“ã«è¡¨ç¤ºã•ã‚Œã¾ã™ -->
                </div>
            </div>

            <!-- æ¤œç´¢ãƒ»ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼æ©Ÿèƒ½ï¼ˆæ‹¡å¼µç‰ˆï¼‰ -->
            <div class="bg-white rounded-lg shadow-md p-4 mb-6">
                <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
                    <div>
                        <input
                            type="text"
                            id="searchBox"
                            placeholder="å•†å“åãƒ»SKUãƒ»èª¬æ˜ã§æ¤œç´¢"
                            class="w-full px-3 py-2 border border-gray-300 rounded-md"
                        />
                    </div>
                    <div>
                        <select id="filterCategory" class="w-full px-3 py-2 border border-gray-300 rounded-md">
                            <option value="">ã™ã¹ã¦ã®ã‚«ãƒ†ã‚´ãƒªãƒ¼</option>
                            <option value="æ™®é€šåˆ‡æ‰‹">æ™®é€šåˆ‡æ‰‹</option>
                            <option value="è¨˜å¿µåˆ‡æ‰‹">è¨˜å¿µåˆ‡æ‰‹</option>
                            <option value="ç‰¹æ®Šåˆ‡æ‰‹">ç‰¹æ®Šåˆ‡æ‰‹</option>
                            <option value="ã‚¨ãƒ©ãƒ¼ãƒ»å¤‰ç¨®åˆ‡æ‰‹">ã‚¨ãƒ©ãƒ¼ãƒ»å¤‰ç¨®åˆ‡æ‰‹</option>
                            <option value="æ­´å²çš„åˆ‡æ‰‹">æ­´å²çš„åˆ‡æ‰‹</option>
                            <option value="åˆ‡æ‰‹é–¢é€£å“">åˆ‡æ‰‹é–¢é€£å“</option>
                        </select>
                    </div>
                    <div>
                        <select id="filterStatus" class="w-full px-3 py-2 border border-gray-300 rounded-md">
                            <option value="">ã™ã¹ã¦ã®çŠ¶æ…‹</option>
                            <option value="active">è²©å£²ä¸­</option>
                            <option value="soldout">SOLD OUT</option>
                            <option value="outofstock">åœ¨åº«åˆ‡ã‚Œ</option>
                        </select>
                    </div>
                    <div class="flex gap-2">
                        <button
                            onclick="applyFilters()"
                            class="flex-1 bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700"
                        >
                            æ¤œç´¢
                        </button>
                        <button
                            onclick="resetFilters()"
                            class="px-4 py-2 border border-gray-300 rounded-md hover:bg-gray-50"
                        >
                            ãƒªã‚»ãƒƒãƒˆ
                        </button>
                    </div>
                </div>
                <div class="mt-4 flex justify-between items-center">
                    <div class="flex gap-4 items-center">
                        <label class="text-sm text-gray-600">è¡¨ç¤ºä»¶æ•°:</label>
                        <select id="pageSizeSelect" class="px-3 py-1 border border-gray-300 rounded-md" onchange="changePageSize()">
                            <option value="20">20ä»¶</option>
                            <option value="50" selected>50ä»¶</option>
                            <option value="100">100ä»¶</option>
                            <option value="200">200ä»¶</option>
                        </select>
                    </div>
                    <div class="flex gap-4 items-center">
                        <label class="text-sm text-gray-600">ä¸¦ã³é †:</label>
                        <select id="sortSelect" class="px-3 py-1 border border-gray-300 rounded-md" onchange="changeSorting()">
                            <option value="created_at:desc">ç™»éŒ²æ—¥ï¼ˆæ–°ã—ã„é †ï¼‰</option>
                            <option value="created_at:asc">ç™»éŒ²æ—¥ï¼ˆå¤ã„é †ï¼‰</option>
                            <option value="title:asc">å•†å“åï¼ˆæ˜‡é †ï¼‰</option>
                            <option value="title:desc">å•†å“åï¼ˆé™é †ï¼‰</option>
                            <option value="price:desc">ä¾¡æ ¼ï¼ˆé«˜ã„é †ï¼‰</option>
                            <option value="price:asc">ä¾¡æ ¼ï¼ˆå®‰ã„é †ï¼‰</option>
                            <option value="sku:asc">SKUï¼ˆæ˜‡é †ï¼‰</option>
                        </select>
                    </div>
                </div>
            </div>

            <!-- ãƒãƒ«ã‚¯æ“ä½œãƒ„ãƒ¼ãƒ« -->
            <div class="bg-white rounded-lg shadow-md p-4 mb-6">
                <h3 class="text-lg font-semibold mb-3">ãƒãƒ«ã‚¯æ“ä½œ</h3>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
                    <button
                        onclick="showImportDialog()"
                        class="bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 flex items-center justify-center gap-2"
                    >
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"></path>
                        </svg>
                        CSVã‚¤ãƒ³ãƒãƒ¼ãƒˆ
                    </button>
                    <button
                        onclick="exportProducts()"
                        class="bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 flex items-center justify-center gap-2"
                    >
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3M3 17V7a2 2 0 012-2h6l2 2h6a2 2 0 012 2v10a2 2 0 01-2 2H5a2 2 0 01-2-2z"></path>
                        </svg>
                        CSVã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ
                    </button>
                    <button
                        onclick="bulkMarkSoldOut()"
                        class="bg-orange-600 text-white px-4 py-2 rounded-md hover:bg-orange-700 flex items-center justify-center gap-2"
                    >
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.082 14.5c-.77.833.192 2.5 1.732 2.5z"></path>
                        </svg>
                        ä¸€æ‹¬å£²åˆ‡ã‚Œ
                    </button>
                    <button
                        onclick="generateMissingSKUs()"
                        class="bg-purple-600 text-white px-4 py-2 rounded-md hover:bg-purple-700 flex items-center justify-center gap-2"
                    >
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                        </svg>
                        SKUè‡ªå‹•ç”Ÿæˆ
                    </button>
                </div>
                <div class="mt-4 grid grid-cols-1 md:grid-cols-3 gap-4">
                    <button
                        onclick="showStockManagement()"
                        class="bg-indigo-600 text-white px-4 py-2 rounded-md hover:bg-indigo-700 flex items-center justify-center gap-2"
                    >
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path>
                        </svg>
                        åœ¨åº«ç®¡ç†
                    </button>
                    <button
                        onclick="showPriceManagement()"
                        class="bg-yellow-600 text-white px-4 py-2 rounded-md hover:bg-yellow-700 flex items-center justify-center gap-2"
                    >
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"></path>
                        </svg>
                        ä¾¡æ ¼ç®¡ç†
                    </button>
                    <button
                        onclick="cleanupProducts()"
                        class="bg-red-600 text-white px-4 py-2 rounded-md hover:bg-red-700 flex items-center justify-center gap-2"
                    >
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
                        </svg>
                        ãƒ‡ãƒ¼ã‚¿æ•´ç†
                    </button>
                </div>
            </div>

            <!-- å•†å“ç™»éŒ²ãƒ•ã‚©ãƒ¼ãƒ ï¼ˆæŠ˜ã‚ŠãŸãŸã¿å¯èƒ½ï¼‰ -->
            <div class="bg-white rounded-lg shadow-lg mb-8">
                <div class="p-4 md:p-6 border-b cursor-pointer" onclick="toggleProductForm()">
                    <h2 class="text-xl font-semibold flex items-center justify-between">
                        <span>æ–°è¦å•†å“ç™»éŒ²</span>
                        <svg id="form-toggle-icon" class="w-6 h-6 transform transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                        </svg>
                    </h2>
                </div>
                <div id="product-form-container" class="p-4 md:p-8 hidden">
                    <form id="product-form" onsubmit="handleProductSubmit(event)">
                        <!-- ç”»åƒã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ -->
                        <div class="text-center mb-8">
                            <div id="image-preview" class="mb-4 flex justify-center" ondrop="handleDrop(event)" ondragover="handleDragOver(event)" ondragleave="handleDragLeave(event)">
                                <div class="w-[200px] h-[200px] border-2 border-dashed border-gray-300 rounded-lg flex items-center justify-center bg-gray-50 transition-all" id="drop-zone">
                                    <p class="text-gray-400">ç”»åƒã‚’ãƒ‰ãƒ©ãƒƒã‚°&ãƒ‰ãƒ­ãƒƒãƒ—<br />ã¾ãŸã¯</p>
                                </div>
                            </div>
                            <label for="image" class="cursor-pointer bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors inline-block">
                                ç”»åƒã‚’é¸æŠ
                            </label>
                            <input type="file" id="image" accept="image/*" class="hidden" onchange="previewImage(event)" />
                        </div>

                        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                            <!-- å·¦å´ï¼šåŸºæœ¬æƒ…å ± -->
                            <div class="space-y-6">
                                <!-- å•†å“å -->
                                <div>
                                    <label class="block text-lg font-medium text-gray-700 mb-2">å•†å“å <span class="text-red-500">*</span></label>
                                    <input type="text" id="title" required class="w-full px-4 py-3 text-lg border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="ä¾‹ï¼šæ—¥æœ¬ã®é¢¨æ™¯åˆ‡æ‰‹ã‚»ãƒƒãƒˆ" />
                                </div>

                                <!-- ä¾¡æ ¼ -->
                                <div>
                                    <label class="block text-lg font-medium text-gray-700 mb-2">ä¾¡æ ¼</label>
                                    <div class="flex gap-2">
                                        <input type="number" id="price" class="flex-1 px-4 py-3 text-lg border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="ä¾‹ï¼š1280" />
                                        <label class="flex items-center px-4 py-3 bg-gray-50 rounded-lg">
                                            <input type="checkbox" id="negotiable" class="mr-2" />
                                            <span class="text-base">å¿œç›¸è«‡</span>
                                        </label>
                                    </div>
                                </div>

                                <!-- SKU -->
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">å•†å“ã‚³ãƒ¼ãƒ‰ï¼ˆSKUï¼‰</label>
                                    <div class="flex gap-2">
                                        <input type="text" id="sku" class="flex-1 px-3 py-2 border border-gray-300 rounded-md" placeholder="ä¾‹ï¼šJP-MJ-001" />
                                        <button type="button" onclick="generateRandomSKU()" class="px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700">
                                            è‡ªå‹•ç”Ÿæˆ
                                        </button>
                                    </div>
                                    <p class="text-xs text-gray-500 mt-1">â€»æœªå…¥åŠ›ã®å ´åˆã¯è‡ªå‹•ç”Ÿæˆã•ã‚Œã¾ã™</p>
                                </div>
                            </div>

                            <!-- å³å´ï¼šè©³ç´°æƒ…å ± -->
                            <div class="space-y-6">
                                <!-- åœ¨åº« -->
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">åœ¨åº«æ•°</label>
                                    <input type="number" id="stock" class="w-full px-3 py-2 border border-gray-300 rounded-md" value="1" min="0" max="999" />
                                    <p class="text-xs text-gray-500 mt-1">â€»0ã§åœ¨åº«åˆ‡ã‚Œè¡¨ç¤º</p>
                                </div>

                                <!-- ã‚«ãƒ†ã‚´ãƒªãƒ¼ -->
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">å¤§ã‚«ãƒ†ã‚´ãƒªãƒ¼</label>
                                    <select id="mainCategory" class="w-full px-3 py-2 border border-gray-300 rounded-md" onchange="updateSubCategories()">
                                        <option value="">å¤§ã‚«ãƒ†ã‚´ãƒªãƒ¼ã‚’é¸æŠ</option>
                                        <option value="æ™®é€šåˆ‡æ‰‹">æ™®é€šåˆ‡æ‰‹</option>
                                        <option value="èˆªç©ºåˆ‡æ‰‹">èˆªç©ºåˆ‡æ‰‹</option>
                                        <option value="è¨˜å¿µåˆ‡æ‰‹">è¨˜å¿µåˆ‡æ‰‹</option>
                                        <option value="ç‰¹æ®Šåˆ‡æ‰‹">ç‰¹æ®Šåˆ‡æ‰‹</option>
                                        <option value="å…¬åœ’åˆ‡æ‰‹">å…¬åœ’åˆ‡æ‰‹</option>
                                        <option value="å¹´è³€åˆ‡æ‰‹">å¹´è³€åˆ‡æ‰‹</option>
                                        <option value="ãµã‚‹ã•ã¨åˆ‡æ‰‹">ãµã‚‹ã•ã¨åˆ‡æ‰‹</option>
                                        <option value="æ²–ç¸„åˆ‡æ‰‹">æ²–ç¸„åˆ‡æ‰‹</option>
                                        <option value="é™å®šè²©å£²å“">é™å®šè²©å£²å“</option>
                                        <option value="å¤–å›½åˆ‡æ‰‹">å¤–å›½åˆ‡æ‰‹</option>
                                        <option value="ãƒ†ãƒ¼ãƒåˆ¥åˆ‡æ‰‹">ãƒ†ãƒ¼ãƒåˆ¥åˆ‡æ‰‹</option>
                                        <option value="ã‚¨ãƒ©ãƒ¼ãƒ»å¤‰ç¨®åˆ‡æ‰‹">ã‚¨ãƒ©ãƒ¼ãƒ»å¤‰ç¨®åˆ‡æ‰‹</option>
                                        <option value="æ­´å²çš„åˆ‡æ‰‹">æ­´å²çš„åˆ‡æ‰‹</option>
                                        <option value="åˆ‡æ‰‹é–¢é€£å“">åˆ‡æ‰‹é–¢é€£å“</option>
                                        <option value="é€šä¿¡ç”¨åˆ‡æ‰‹">é€šä¿¡ç”¨åˆ‡æ‰‹</option>
                                        <option value="åé›†ç”¨å“">åé›†ç”¨å“</option>
                                    </select>
                                </div>

                                <!-- ã‚µãƒ–ã‚«ãƒ†ã‚´ãƒªãƒ¼ -->
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">ã‚µãƒ–ã‚«ãƒ†ã‚´ãƒªãƒ¼</label>
                                    <select id="subCategory" class="w-full px-3 py-2 border border-gray-300 rounded-md" disabled>
                                        <option value="">ã¾ãšå¤§ã‚«ãƒ†ã‚´ãƒªãƒ¼ã‚’é¸æŠã—ã¦ãã ã•ã„</option>
                                    </select>
                                    <input type="hidden" id="category" value="" />
                                </div>

                                <!-- ã‚ªãƒ—ã‚·ãƒ§ãƒ³ -->
                                <div>
                                    <label class="flex items-center">
                                        <input type="checkbox" id="isNew" class="mr-2" checked />
                                        <span class="text-sm">æ–°ç€å•†å“ã¨ã—ã¦è¡¨ç¤º</span>
                                    </label>
                                </div>
                            </div>
                        </div>

                        <!-- å•†å“èª¬æ˜ -->
                        <div class="mt-6">
                            <label class="block text-sm font-medium text-gray-700 mb-1">å•†å“èª¬æ˜</label>
                            <textarea id="description" rows="4" class="w-full px-3 py-2 border border-gray-300 rounded-md" placeholder="å•†å“ã®è©³ç´°ãªèª¬æ˜ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„"></textarea>
                        </div>

                        <!-- ç™»éŒ²ãƒœã‚¿ãƒ³ -->
                        <div class="mt-8 flex gap-4">
                            <button type="submit" class="flex-1 bg-green-600 text-white text-lg font-medium px-6 py-4 rounded-lg hover:bg-green-700 transition-colors">
                                <span id="submit-text">å•†å“ã‚’ç™»éŒ²ã™ã‚‹</span>
                            </button>
                            <button type="button" onclick="resetForm()" class="px-6 py-4 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors">
                                ãƒªã‚»ãƒƒãƒˆ
                            </button>
                        </div>
                    </form>
                </div>
            </div>

            <!-- ç™»éŒ²æ¸ˆã¿å•†å“ä¸€è¦§ï¼ˆãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³å¯¾å¿œï¼‰ -->
            <div class="bg-white rounded-lg shadow-md p-4 md:p-6">
                <div class="flex justify-between items-center mb-4">
                    <h2 class="text-xl font-semibold">ç™»éŒ²æ¸ˆã¿å•†å“ä¸€è¦§</h2>
                    <div id="product-count" class="text-sm text-gray-600"></div>
                </div>
                
                <!-- ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆä¸Šéƒ¨ï¼‰ -->
                <div id="pagination-top" class="mb-4"></div>
                
                <!-- å•†å“ãƒªã‚¹ãƒˆ -->
                <div id="products-list" class="space-y-4 min-h-[400px]">
                    <!-- å•†å“ãƒªã‚¹ãƒˆãŒã“ã“ã«è¡¨ç¤ºã•ã‚Œã¾ã™ -->
                </div>
                
                <!-- ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆä¸‹éƒ¨ï¼‰ -->
                <div id="pagination-bottom" class="mt-4"></div>
            </div>
        </div>

        <!-- ã‚¤ãƒ³ãƒãƒ¼ãƒˆãƒ€ã‚¤ã‚¢ãƒ­ã‚° -->
        <div id="import-dialog" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50">
            <div class="flex items-center justify-center min-h-screen p-4">
                <div class="bg-white rounded-lg max-w-3xl w-full p-6">
                    <h3 class="text-xl font-semibold mb-4">ğŸ“¥ CSVã‚¤ãƒ³ãƒãƒ¼ãƒˆ</h3>
                    
                    <!-- èª¬æ˜ã¨ã‚µãƒ³ãƒ—ãƒ« -->
                    <div class="mb-6">
                        <div class="bg-blue-50 rounded-lg p-4 mb-4">
                            <p class="text-sm text-blue-800 mb-2">
                                CSVãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã—ã¦å•†å“ã‚’ä¸€æ‹¬ç™»éŒ²ã§ãã¾ã™ã€‚
                            </p>
                            <div class="text-xs text-blue-600">
                                <p><strong>å¿…é ˆåˆ—:</strong> å•†å“å (title)</p>
                                <p><strong>ã‚ªãƒ—ã‚·ãƒ§ãƒ³åˆ—:</strong> SKU, ä¾¡æ ¼, å¿œç›¸è«‡, ã‚«ãƒ†ã‚´ãƒªãƒ¼, èª¬æ˜, åœ¨åº«æ•°, å£²ã‚Šåˆ‡ã‚Œ</p>
                            </div>
                        </div>
                        
                        <div class="flex gap-2 mb-4">
                            <button onclick="downloadSampleCSV()" class="px-3 py-2 text-sm bg-gray-600 text-white rounded hover:bg-gray-700">
                                ğŸ“„ ã‚µãƒ³ãƒ—ãƒ«CSVãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰
                            </button>
                            <span class="text-xs text-gray-500 self-center">â† ã‚µãƒ³ãƒ—ãƒ«ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å‚è€ƒã«ã—ã¦ãã ã•ã„</span>
                        </div>
                    </div>
                    
                    <!-- ãƒ•ã‚¡ã‚¤ãƒ«é¸æŠ -->
                    <div class="mb-4">
                        <label class="block text-sm font-medium text-gray-700 mb-2">CSVãƒ•ã‚¡ã‚¤ãƒ«ã‚’é¸æŠ</label>
                        <input type="file" id="csv-file" accept=".csv" 
                               class="block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100">
                    </div>
                    
                    <!-- ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãƒœã‚¿ãƒ³ -->
                    <div class="flex justify-end gap-2">
                        <button onclick="closeImportDialog()" class="px-4 py-2 border border-gray-300 rounded-md hover:bg-gray-50">
                            ã‚­ãƒ£ãƒ³ã‚»ãƒ«
                        </button>
                        <button onclick="importCSV()" class="px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700">
                            ğŸ“¥ ã‚¤ãƒ³ãƒãƒ¼ãƒˆ
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <script>
            // ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³å¯¾å¿œã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼
            let storageManager;
            let imageUploader;
            let editingProductId = null;
            let formVisible = false;

            // ã‚«ãƒ†ã‚´ãƒªãƒ¼ãƒ‡ãƒ¼ã‚¿
            let categoryData = {
                "æ™®é€šåˆ‡æ‰‹": ["æ˜æ²»æ™®é€šåˆ‡æ‰‹", "æ‰‹å½«åˆ‡æ‰‹", "ç«œæ–‡åˆ‡æ‰‹", "æ¡œåˆ‡æ‰‹", "èŠåˆ‡æ‰‹", "ã‚³ã‚¤ãƒ«åˆ‡æ‰‹"],
                "èˆªç©ºåˆ‡æ‰‹": ["çƒéƒ¨èˆªç©º", "å¤§æ­£èˆªç©º", "æ˜­å’Œèˆªç©ºï¼ˆæˆ¦å‰ï¼‰", "äº”éŠ­ä½èˆªç©º", "å††ä½èˆªç©º", "éŠ…ç‰ˆèˆªç©º", "ç«‹å±±èˆªç©º"],
                "è¨˜å¿µåˆ‡æ‰‹": ["æ˜æ²»è¨˜å¿µ", "å¤§æ­£è¨˜å¿µ", "æ˜­å’Œæˆ¦å‰è¨˜å¿µ", "æ˜­å’Œæˆ¦å¾Œè¨˜å¿µ", "å¹³æˆè¨˜å¿µ", "ä»¤å’Œè¨˜å¿µ", "å°å‹ã‚·ãƒ¼ãƒˆ", "æ–‡åŒ–äººã‚·ãƒªãƒ¼ã‚º", "å›½ä½“ã‚·ãƒªãƒ¼ã‚º", "ã‚ªãƒªãƒ³ãƒ”ãƒƒã‚¯é–¢é€£"],
                "ç‰¹æ®Šåˆ‡æ‰‹": ["ã‚°ãƒªãƒ¼ãƒ†ã‚£ãƒ³ã‚°åˆ‡æ‰‹", "ã‚·ãƒ¼ãƒ«å¼åˆ‡æ‰‹", "ãƒ•ãƒ¬ãƒ¼ãƒ åˆ‡æ‰‹", "æ…¶å¼”åˆ‡æ‰‹", "å¼”ç­’åˆ‡æ‰‹", "å¤ã®ãŠãŸã‚ˆã‚Š", "ç¾è¡“åˆ‡æ‰‹", "ã‚¢ãƒ‹ãƒ¡ãƒ»ãƒ’ãƒ¼ãƒ­ãƒ¼"],
                "å…¬åœ’åˆ‡æ‰‹": ["ç¬¬1æ¬¡å›½ç«‹å…¬åœ’", "ç¬¬2æ¬¡å›½ç«‹å…¬åœ’", "å›½å®šå…¬åœ’", "å¯Œå£«ç®±æ ¹", "æ—¥å…‰", "å‰é‡ç†Šé‡", "é˜¿è˜‡", "å¤§å±±ç‘ ç’ƒ"],
                "å¹´è³€åˆ‡æ‰‹": ["æ˜­å’Œ10å¹´ä»¥å‰", "æ˜­å’Œ11-20å¹´", "æ˜­å’Œ21-30å¹´", "æ˜­å’Œ31-40å¹´", "æ˜­å’Œ41-50å¹´", "æ˜­å’Œ51-64å¹´", "å¹³æˆå¹´è³€", "ä»¤å’Œå¹´è³€", "ãŠå¹´ç‰å°å‹ã‚·ãƒ¼ãƒˆ"],
                "ãµã‚‹ã•ã¨åˆ‡æ‰‹": ["åŒ—æµ·é“ãƒ»æ±åŒ—", "é–¢æ±ãƒ»ä¿¡è¶Š", "æ±æµ·ãƒ»åŒ—é™¸", "è¿‘ç•¿", "ä¸­å›½ãƒ»å››å›½", "ä¹å·ãƒ»æ²–ç¸„", "èŠ±ã‚·ãƒªãƒ¼ã‚º", "é¢¨æ™¯ã‚·ãƒªãƒ¼ã‚º"],
                "æ²–ç¸„åˆ‡æ‰‹": ["ç±³å›½çµ±æ²»æ™‚ä»£", "ç‰çƒæ”¿åºœ", "æš«å®šåˆ‡æ‰‹", "èˆªç©ºåˆ‡æ‰‹", "é€Ÿé”åˆ‡æ‰‹", "åå…¥å°ç´™"],
                "é™å®šè²©å£²å“": ["ãƒ—ãƒ¬ãƒŸã‚¢ãƒ åˆ‡æ‰‹", "ç‰¹åˆ¥è²©å£²å“", "éƒµä¾¿å±€é™å®š", "ã‚ªãƒªã‚¸ãƒŠãƒ«ãƒ•ãƒ¬ãƒ¼ãƒ ", "å¹´è³€ãƒ‘ãƒƒã‚¯", "ãƒ•ã‚©ãƒ«ãƒ ã‚«ãƒ¼ãƒ‰"],
                "å¤–å›½åˆ‡æ‰‹": ["ã‚¢ãƒ¡ãƒªã‚«", "ã‚¤ã‚®ãƒªã‚¹", "ãƒ•ãƒ©ãƒ³ã‚¹", "ãƒ‰ã‚¤ãƒ„", "ä¸­å›½", "éŸ“å›½", "ã‚«ãƒŠãƒ€", "ã‚ªãƒ¼ã‚¹ãƒˆãƒ©ãƒªã‚¢", "ãã®ä»–ã®å›½"],
                "ãƒ†ãƒ¼ãƒåˆ¥åˆ‡æ‰‹": ["å‹•ç‰©åˆ‡æ‰‹", "èŠ±ãƒ»æ¤ç‰©åˆ‡æ‰‹", "é‰„é“åˆ‡æ‰‹", "èŠ¸è¡“ãƒ»ç¾è¡“åˆ‡æ‰‹", "ã‚¹ãƒãƒ¼ãƒ„åˆ‡æ‰‹", "å®‡å®™åˆ‡æ‰‹", "èˆ¹èˆ¶åˆ‡æ‰‹"],
                "ã‚¨ãƒ©ãƒ¼ãƒ»å¤‰ç¨®åˆ‡æ‰‹": ["é€†åˆ·ã‚Šã‚¨ãƒ©ãƒ¼", "è‰²é•ã„ã‚¨ãƒ©ãƒ¼", "ç›®æ‰“ã¡ã‚¨ãƒ©ãƒ¼", "å°åˆ·ã‚ºãƒ¬", "å®šå¸¸å¤‰ç¨®"],
                "æ­´å²çš„åˆ‡æ‰‹": ["æ‰‹å½«åˆ‡æ‰‹", "å°åˆ¤åˆ‡æ‰‹", "èŠåˆ‡æ‰‹", "ç”°æ²¢åˆ‡æ‰‹", "éœ‡ç½åˆ‡æ‰‹"],
                "åˆ‡æ‰‹é–¢é€£å“": ["åˆæ—¥ã‚«ãƒãƒ¼", "å®˜è£½ã¯ãŒã", "åå…¥å°ç´™", "è»äº‹åˆ‡æ‰‹"],
                "é€šä¿¡ç”¨åˆ‡æ‰‹": [],
                "åé›†ç”¨å“": ["åˆ‡æ‰‹ã‚¢ãƒ«ãƒãƒ ", "ãƒ”ãƒ³ã‚»ãƒƒãƒˆ", "ãƒ«ãƒ¼ãƒš", "ãƒã‚¦ãƒ³ãƒˆ", "ä¿å­˜ã‚±ãƒ¼ã‚¹", "ã‚«ã‚¿ãƒ­ã‚°"]
            };

            // åˆæœŸåŒ–
            window.addEventListener('DOMContentLoaded', () => {
                try {
                    storageManager = new PaginatedStorageManager();
                    imageUploader = new ImageUploader();
                    
                    // ãƒ‡ãƒ¼ã‚¿å¤‰æ›´ã‚’ç›£è¦–
                    storageManager.onDataChange((products) => {
                        updateStatistics();
                        displayProducts();
                    });

                    // æ¤œç´¢ãƒœãƒƒã‚¯ã‚¹ã®ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ¤œç´¢
                    document.getElementById('searchBox').addEventListener('input', debounce(() => {
                        applyFilters();
                    }, 300));

                    // åˆæœŸãƒ‡ãƒ¼ã‚¿èª­ã¿è¾¼ã¿
                    initializeApp();

                } catch (error) {
                    console.error('Initialization error:', error);
                    alert('åˆæœŸåŒ–ã‚¨ãƒ©ãƒ¼: ' + error.message);
                }
            });

            // ã‚¢ãƒ—ãƒªåˆæœŸåŒ–é–¢æ•°
            function initializeApp() {
                updateStatistics();
                displayProducts();
                loadCategoriesToSelect();
            }

            // ã‚«ãƒ†ã‚´ãƒªãƒ¼ã‚’ã‚»ãƒ¬ã‚¯ãƒˆãƒœãƒƒã‚¯ã‚¹ã«èª­ã¿è¾¼ã¿
            function loadCategoriesToSelect() {
                const categorySelect = document.getElementById('category');
                if (categorySelect) {
                    categorySelect.innerHTML = '<option value="">ã‚«ãƒ†ã‚´ãƒªãƒ¼ã‚’é¸æŠ</option>';
                    Object.keys(categoryData).forEach(category => {
                        const option = document.createElement('option');
                        option.value = category;
                        option.textContent = category;
                        categorySelect.appendChild(option);
                    });
                }

                const filterCategorySelect = document.getElementById('filterCategory');
                if (filterCategorySelect) {
                    filterCategorySelect.innerHTML = '<option value="">ã™ã¹ã¦ã®ã‚«ãƒ†ã‚´ãƒªãƒ¼</option>';
                    Object.keys(categoryData).forEach(category => {
                        const option = document.createElement('option');
                        option.value = category;
                        option.textContent = category;
                        filterCategorySelect.appendChild(option);
                    });
                }
            }

            // ãƒ‡ãƒã‚¦ãƒ³ã‚¹é–¢æ•°
            function debounce(func, wait) {
                let timeout;
                return function executedFunction(...args) {
                    const later = () => {
                        clearTimeout(timeout);
                        func(...args);
                    };
                    clearTimeout(timeout);
                    timeout = setTimeout(later, wait);
                };
            }

            // çµ±è¨ˆæƒ…å ±ã‚’æ›´æ–°
            function updateStatistics() {
                const stats = storageManager.getStatistics();
                const statsElement = document.getElementById('statistics');
                
                statsElement.innerHTML = `
                    <div class="text-center">
                        <div class="text-3xl font-bold text-blue-600">${stats.total.toLocaleString()}</div>
                        <div class="text-sm text-gray-600">ç·å•†å“æ•°</div>
                    </div>
                    <div class="text-center">
                        <div class="text-3xl font-bold text-green-600">${stats.active.toLocaleString()}</div>
                        <div class="text-sm text-gray-600">è²©å£²ä¸­</div>
                    </div>
                    <div class="text-center">
                        <div class="text-3xl font-bold text-red-600">${stats.soldOut.toLocaleString()}</div>
                        <div class="text-sm text-gray-600">å£²ã‚Šåˆ‡ã‚Œ</div>
                    </div>
                    <div class="text-center">
                        <div class="text-3xl font-bold text-gray-600">Â¥${stats.averagePrice.toLocaleString()}</div>
                        <div class="text-sm text-gray-600">å¹³å‡ä¾¡æ ¼</div>
                    </div>
                `;
            }

            // ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ã‚’é©ç”¨
            function applyFilters() {
                const filters = {
                    search: document.getElementById('searchBox').value,
                    category: document.getElementById('filterCategory').value,
                    status: document.getElementById('filterStatus').value
                };
                
                storageManager.setFilters(filters);
                storageManager.goToPage(1); // æœ€åˆã®ãƒšãƒ¼ã‚¸ã«æˆ»ã‚‹
                displayProducts();
            }

            // ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ã‚’ãƒªã‚»ãƒƒãƒˆ
            function resetFilters() {
                document.getElementById('searchBox').value = '';
                document.getElementById('filterCategory').value = '';
                document.getElementById('filterStatus').value = '';
                applyFilters();
            }

            // ãƒšãƒ¼ã‚¸ã‚µã‚¤ã‚ºã‚’å¤‰æ›´
            function changePageSize() {
                const pageSize = parseInt(document.getElementById('pageSizeSelect').value);
                storageManager.setPageSize(pageSize);
                displayProducts();
            }

            // ã‚½ãƒ¼ãƒˆé †ã‚’å¤‰æ›´
            function changeSorting() {
                const sortValue = document.getElementById('sortSelect').value;
                const [sortBy, sortOrder] = sortValue.split(':');
                storageManager.setSorting(sortBy, sortOrder);
                displayProducts();
            }

            // å•†å“ã‚’è¡¨ç¤º
            function displayProducts() {
                const result = storageManager.getPaginatedProducts();
                const listElement = document.getElementById('products-list');
                const countElement = document.getElementById('product-count');
                
                // å•†å“æ•°ã‚’è¡¨ç¤º
                countElement.textContent = `${result.totalProducts.toLocaleString()}ä»¶ä¸­ ${((result.currentPage - 1) * result.pageSize + 1).toLocaleString()}-${Math.min(result.currentPage * result.pageSize, result.totalProducts).toLocaleString()}ä»¶ã‚’è¡¨ç¤º`;

                if (result.products.length === 0) {
                    listElement.innerHTML = '<p class="text-gray-500 text-center py-8">è©²å½“ã™ã‚‹å•†å“ã¯ã‚ã‚Šã¾ã›ã‚“</p>';
                    updatePagination(result);
                    return;
                }

                // å•†å“ãƒªã‚¹ãƒˆã‚’è¡¨ç¤º
                listElement.innerHTML = result.products.map(product => `
                    <div class="border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow ${product.soldOut ? 'bg-gray-50' : ''}">
                        <div class="flex flex-col md:flex-row items-start gap-4">
                            <!-- ç”»åƒ -->
                            <div class="relative flex-shrink-0">
                                <img src="${product.imageUrl}" alt="${product.title}" class="w-full md:w-24 h-32 md:h-24 object-cover rounded-lg ${product.soldOut ? 'opacity-60' : ''}">
                                ${product.soldOut ? '<div class="absolute inset-0 flex items-center justify-center"><span class="bg-red-600 text-white text-xs px-2 py-1 rounded font-bold">SOLD OUT</span></div>' : ''}
                            </div>
                            <!-- å•†å“æƒ…å ± -->
                            <div class="flex-1">
                                <div class="flex items-start gap-2 flex-wrap mb-1">
                                    <h3 class="font-semibold text-lg ${product.soldOut ? 'text-gray-500' : ''}">${product.title}</h3>
                                    ${product.soldOut ? '<span class="text-xs bg-red-600 text-white px-2 py-1 rounded">SOLD OUT</span>' : ''}
                                    ${product.isNew && !product.soldOut ? '<span class="text-xs bg-red-100 text-red-600 px-2 py-1 rounded">NEW</span>' : ''}
                                </div>
                                <p class="text-xs text-gray-500 mb-1">SKU: ${product.sku || 'æœªè¨­å®š'} | ç™»éŒ²æ—¥: ${product.created_at ? new Date(product.created_at).toLocaleDateString() : 'ä¸æ˜'}</p>
                                <p class="text-lg font-bold ${product.negotiable ? 'text-blue-600' : 'text-red-600'} mb-1">
                                    ${product.priceText || (product.price ? `Â¥${product.price.toLocaleString()}` : 'ä¾¡æ ¼æœªè¨­å®š')}
                                </p>
                                <p class="text-sm text-gray-600">
                                    ã‚«ãƒ†ã‚´ãƒªãƒ¼: ${product.category || 'æœªåˆ†é¡'} | åœ¨åº«: ${product.stock || 0}
                                </p>
                                ${product.description ? `<p class="text-sm text-gray-500 mt-2 line-clamp-2">${product.description}</p>` : ''}
                            </div>
                        </div>
                        <!-- ãƒœã‚¿ãƒ³ã‚¨ãƒªã‚¢ -->
                        <div class="mt-4 flex flex-wrap gap-2 justify-center md:justify-end">
                            <button onclick="editProduct('${product.id}')" class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 font-medium transition-colors">
                                ç·¨é›†
                            </button>
                            <button onclick="toggleSoldOut('${product.id}')" class="bg-${product.soldOut ? 'green' : 'orange'}-600 text-white px-4 py-2 rounded hover:bg-${product.soldOut ? 'green' : 'orange'}-700 font-medium transition-colors">
                                ${product.soldOut ? 'è²©å£²å†é–‹' : 'å£²ã‚Šåˆ‡ã‚Œ'}
                            </button>
                            <button onclick="deleteProduct('${product.id}')" class="bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700 font-medium transition-colors">
                                å‰Šé™¤
                            </button>
                        </div>
                    </div>
                `).join('');

                // ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³ã‚’æ›´æ–°
                updatePagination(result);
            }

            // ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³ã‚’æ›´æ–°
            function updatePagination(result) {
                const paginationHtml = createPaginationHtml(result);
                document.getElementById('pagination-top').innerHTML = paginationHtml;
                document.getElementById('pagination-bottom').innerHTML = paginationHtml;
            }

            // ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³HTMLã‚’ç”Ÿæˆ
            function createPaginationHtml(result) {
                if (result.totalPages <= 1) return '';

                let html = '<div class="flex items-center justify-center gap-2">';
                
                // å‰ã¸ãƒœã‚¿ãƒ³
                html += `<button onclick="goToPage(${result.currentPage - 1})" ${!result.hasPrevPage ? 'disabled' : ''} class="px-3 py-1 border rounded-md ${result.hasPrevPage ? 'hover:bg-gray-100' : 'opacity-50 cursor-not-allowed'}">å‰ã¸</button>`;
                
                // ãƒšãƒ¼ã‚¸ç•ªå·
                const maxButtons = 7;
                let startPage = Math.max(1, result.currentPage - Math.floor(maxButtons / 2));
                let endPage = Math.min(result.totalPages, startPage + maxButtons - 1);
                
                if (endPage - startPage < maxButtons - 1) {
                    startPage = Math.max(1, endPage - maxButtons + 1);
                }

                if (startPage > 1) {
                    html += `<button onclick="goToPage(1)" class="px-3 py-1 border rounded-md hover:bg-gray-100">1</button>`;
                    if (startPage > 2) html += '<span class="px-2">...</span>';
                }

                for (let i = startPage; i <= endPage; i++) {
                    html += `<button onclick="goToPage(${i})" class="px-3 py-1 border rounded-md ${i === result.currentPage ? 'bg-blue-600 text-white' : 'hover:bg-gray-100'}">${i}</button>`;
                }

                if (endPage < result.totalPages) {
                    if (endPage < result.totalPages - 1) html += '<span class="px-2">...</span>';
                    html += `<button onclick="goToPage(${result.totalPages})" class="px-3 py-1 border rounded-md hover:bg-gray-100">${result.totalPages}</button>`;
                }
                
                // æ¬¡ã¸ãƒœã‚¿ãƒ³
                html += `<button onclick="goToPage(${result.currentPage + 1})" ${!result.hasNextPage ? 'disabled' : ''} class="px-3 py-1 border rounded-md ${result.hasNextPage ? 'hover:bg-gray-100' : 'opacity-50 cursor-not-allowed'}">æ¬¡ã¸</button>`;
                
                html += '</div>';
                return html;
            }

            // ãƒšãƒ¼ã‚¸ç§»å‹•
            function goToPage(page) {
                if (storageManager.goToPage(page)) {
                    displayProducts();
                    // ãƒšãƒ¼ã‚¸ä¸Šéƒ¨ã«ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«
                    document.getElementById('products-list').scrollIntoView({ behavior: 'smooth', block: 'start' });
                }
            }

            // å•†å“ãƒ•ã‚©ãƒ¼ãƒ ã®è¡¨ç¤º/éè¡¨ç¤º
            function toggleProductForm() {
                formVisible = !formVisible;
                const container = document.getElementById('product-form-container');
                const icon = document.getElementById('form-toggle-icon');
                
                if (formVisible) {
                    container.classList.remove('hidden');
                    icon.classList.add('rotate-180');
                } else {
                    container.classList.add('hidden');
                    icon.classList.remove('rotate-180');
                }
            }

            // CSVã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ
            function exportProducts() {
                try {
                    const products = storageManager.getFilteredProducts();
                    
                    if (products.length === 0) {
                        alert('ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã™ã‚‹å•†å“ãŒã‚ã‚Šã¾ã›ã‚“');
                        return;
                    }
                    
                    // CSVãƒ˜ãƒƒãƒ€ãƒ¼
                    const headers = ['SKU', 'å•†å“å', 'ä¾¡æ ¼', 'å¿œç›¸è«‡', 'ã‚«ãƒ†ã‚´ãƒªãƒ¼', 'èª¬æ˜', 'åœ¨åº«æ•°', 'å£²ã‚Šåˆ‡ã‚Œ', 'ç™»éŒ²æ—¥'];
                    const csvContent = [
                        headers.join(','),
                        ...products.map(p => [
                            p.sku || '',
                            `"${(p.title || '').replace(/"/g, '""')}"`,
                            p.price || '',
                            p.negotiable ? 'true' : 'false',
                            `"${(p.category || '').replace(/"/g, '""')}"`,
                            `"${(p.description || '').replace(/"/g, '""')}"`,
                            p.stock || 0,
                            p.soldOut ? 'true' : 'false',
                            p.created_at || ''
                        ].join(','))
                    ].join('\n');

                    // BOMã‚’è¿½åŠ ï¼ˆExcelå¯¾å¿œï¼‰
                    const bom = '\uFEFF';
                    const blob = new Blob([bom + csvContent], { type: 'text/csv;charset=utf-8;' });
                    const link = document.createElement('a');
                    const url = URL.createObjectURL(blob);
                    
                    link.setAttribute('href', url);
                    link.setAttribute('download', `stamp_products_${new Date().toISOString().split('T')[0]}.csv`);
                    link.style.visibility = 'hidden';
                    
                    document.body.appendChild(link);
                    link.click();
                    document.body.removeChild(link);
                    
                    // æˆåŠŸãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
                    setTimeout(() => {
                        alert(`${products.length}ä»¶ã®å•†å“ã‚’CSVã§ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã—ã¾ã—ãŸ`);
                    }, 100);
                    
                } catch (error) {
                    console.error('Export error:', error);
                    alert('ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã«å¤±æ•—ã—ã¾ã—ãŸ: ' + error.message);
                }
            }

            // ã‚¤ãƒ³ãƒãƒ¼ãƒˆãƒ€ã‚¤ã‚¢ãƒ­ã‚°ã‚’è¡¨ç¤º
            function showImportDialog() {
                document.getElementById('import-dialog').classList.remove('hidden');
            }

            // ã‚¤ãƒ³ãƒãƒ¼ãƒˆãƒ€ã‚¤ã‚¢ãƒ­ã‚°ã‚’é–‰ã˜ã‚‹
            function closeImportDialog() {
                document.getElementById('import-dialog').classList.add('hidden');
                document.getElementById('csv-file').value = '';
            }

            // ã‚µãƒ³ãƒ—ãƒ«CSVãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰
            function downloadSampleCSV() {
                const sampleData = [
                    ['SKU', 'å•†å“å', 'ä¾¡æ ¼', 'å¿œç›¸è«‡', 'ã‚«ãƒ†ã‚´ãƒªãƒ¼', 'èª¬æ˜', 'åœ¨åº«æ•°', 'å£²ã‚Šåˆ‡ã‚Œ'],
                    ['ST-20250101-001', 'æ˜æ²»æ™®é€šåˆ‡æ‰‹ 1éŠ­', '5000', 'false', 'æ™®é€šåˆ‡æ‰‹ > æ˜æ²»æ™®é€šåˆ‡æ‰‹', 'æ˜æ²»æ™‚ä»£ã®è²´é‡ãªæ™®é€šåˆ‡æ‰‹ã§ã™', '1', 'false'],
                    ['ST-20250101-002', 'æ¡œåˆ‡æ‰‹ 2éŠ­ ç¾å“', '8000', 'false', 'æ™®é€šåˆ‡æ‰‹ > æ¡œåˆ‡æ‰‹', 'ä¿å­˜çŠ¶æ…‹ã®è‰¯ã„æ¡œåˆ‡æ‰‹', '2', 'false'],
                    ['ST-20250101-003', 'èˆªç©ºåˆ‡æ‰‹ã‚»ãƒƒãƒˆ', '', 'true', 'èˆªç©ºåˆ‡æ‰‹ > æ˜­å’Œèˆªç©ºï¼ˆæˆ¦å‰ï¼‰', 'æˆ¦å‰ã®èˆªç©ºåˆ‡æ‰‹ã‚»ãƒƒãƒˆã€ä¾¡æ ¼ã¯å¿œç›¸è«‡', '1', 'false'],
                    ['ST-20250101-004', 'è¨˜å¿µåˆ‡æ‰‹ æ±äº¬ã‚ªãƒªãƒ³ãƒ”ãƒƒã‚¯', '3000', 'false', 'è¨˜å¿µåˆ‡æ‰‹ > ã‚ªãƒªãƒ³ãƒ”ãƒƒã‚¯é–¢é€£', '1964å¹´æ±äº¬ã‚ªãƒªãƒ³ãƒ”ãƒƒã‚¯è¨˜å¿µåˆ‡æ‰‹', '5', 'false'],
                    ['', 'å¹´è³€åˆ‡æ‰‹ ä»¤å’Œ6å¹´', '120', 'false', 'å¹´è³€åˆ‡æ‰‹ > ä»¤å’Œå¹´è³€', 'SKUæœªè¨­å®šã®ä¾‹ï¼ˆè‡ªå‹•ç”Ÿæˆã•ã‚Œã¾ã™ï¼‰', '10', 'false']
                ];

                const csvContent = sampleData.map(row => 
                    row.map(field => `"${field}"`).join(',')
                ).join('\n');

                const bom = '\uFEFF';
                const blob = new Blob([bom + csvContent], { type: 'text/csv;charset=utf-8;' });
                const link = document.createElement('a');
                const url = URL.createObjectURL(blob);
                
                link.setAttribute('href', url);
                link.setAttribute('download', 'stamp_products_sample.csv');
                link.style.visibility = 'hidden';
                
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
            }

            // CSVã‚¤ãƒ³ãƒãƒ¼ãƒˆ
            async function importCSV() {
                const fileInput = document.getElementById('csv-file');
                const file = fileInput.files[0];
                
                if (!file) {
                    alert('CSVãƒ•ã‚¡ã‚¤ãƒ«ã‚’é¸æŠã—ã¦ãã ã•ã„');
                    return;
                }

                if (!file.name.toLowerCase().endsWith('.csv')) {
                    alert('CSVãƒ•ã‚¡ã‚¤ãƒ«ã‚’é¸æŠã—ã¦ãã ã•ã„');
                    return;
                }

                try {
                    // ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¡¨ç¤º
                    const originalText = document.querySelector('#import-dialog button[onclick="importCSV()"]').textContent;
                    document.querySelector('#import-dialog button[onclick="importCSV()"]').textContent = 'ã‚¤ãƒ³ãƒãƒ¼ãƒˆä¸­...';
                    document.querySelector('#import-dialog button[onclick="importCSV()"]').disabled = true;

                    const text = await file.text();
                    const lines = text.split('\n').filter(line => line.trim());
                    
                    if (lines.length < 2) {
                        throw new Error('CSVãƒ•ã‚¡ã‚¤ãƒ«ã«ãƒ‡ãƒ¼ã‚¿ãŒä¸è¶³ã—ã¦ã„ã¾ã™');
                    }
                    
                    const headers = lines[0].split(',').map(h => h.trim().replace(/"/g, ''));
                    
                    // å¿…é ˆåˆ—ã®ç¢ºèª
                    const requiredColumns = ['å•†å“å', 'title'];
                    const hasRequiredColumn = requiredColumns.some(col => headers.includes(col));
                    if (!hasRequiredColumn) {
                        throw new Error('å¿…é ˆåˆ—ã€Œå•†å“åã€ã¾ãŸã¯ã€Œtitleã€ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“');
                    }
                    
                    const products = [];
                    const errors = [];
                    
                    for (let i = 1; i < lines.length; i++) {
                        try {
                            const values = parseCSVLine(lines[i]);
                            if (values.length === 0 || values.every(v => !v.trim())) continue;
                            
                            const skuValue = values[headers.indexOf('SKU')] || values[headers.indexOf('sku')] || '';
                            const titleValue = values[headers.indexOf('å•†å“å')] || values[headers.indexOf('title')] || '';
                            const priceValue = values[headers.indexOf('ä¾¡æ ¼')] || values[headers.indexOf('price')] || '';
                            const negotiableValue = values[headers.indexOf('å¿œç›¸è«‡')] || values[headers.indexOf('negotiable')] || '';
                            const soldOutValue = values[headers.indexOf('å£²ã‚Šåˆ‡ã‚Œ')] || values[headers.indexOf('soldOut')] || '';
                            
                            if (!titleValue.trim()) {
                                errors.push(`è¡Œ${i + 1}: å•†å“åãŒå…¥åŠ›ã•ã‚Œã¦ã„ã¾ã›ã‚“`);
                                continue;
                            }
                            
                            const price = priceValue ? parseFloat(priceValue.replace(/[^\d.-]/g, '')) : null;
                            const negotiable = negotiableValue.toLowerCase() === 'true';
                            const soldOut = soldOutValue.toLowerCase() === 'true';
                            
                            const product = {
                                id: Date.now().toString() + Math.random().toString(36).substr(2, 9),
                                sku: skuValue.trim() || generateRandomSKU(),
                                title: titleValue.trim(),
                                price: negotiable ? null : (isNaN(price) ? null : price),
                                priceText: '',
                                category: (values[headers.indexOf('ã‚«ãƒ†ã‚´ãƒªãƒ¼')] || values[headers.indexOf('category')] || '').trim(),
                                description: (values[headers.indexOf('èª¬æ˜')] || values[headers.indexOf('description')] || '').trim(),
                                stock: parseInt(values[headers.indexOf('åœ¨åº«æ•°')] || values[headers.indexOf('stock')] || '1') || 1,
                                negotiable: negotiable,
                                status: soldOut ? 'soldout' : 'active',
                                isNew: true,
                                soldOut: soldOut,
                                created_at: new Date().toISOString().split('T')[0],
                                imageUrl: '/images/products/placeholder.jpg'
                            };
                            
                            // priceTextã‚’è¨­å®š
                            if (product.negotiable) {
                                product.priceText = 'å¿œç›¸è«‡';
                            } else if (product.price) {
                                product.priceText = `Â¥${product.price.toLocaleString()}`;
                            } else {
                                product.priceText = 'ä¾¡æ ¼æœªè¨­å®š';
                            }
                            
                            products.push(product);
                            
                        } catch (rowError) {
                            errors.push(`è¡Œ${i + 1}: ${rowError.message}`);
                        }
                    }

                    if (products.length === 0) {
                        throw new Error('ã‚¤ãƒ³ãƒãƒ¼ãƒˆå¯èƒ½ãªå•†å“ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸ');
                    }

                    // ãƒãƒ«ã‚¯ã‚¤ãƒ³ãƒãƒ¼ãƒˆ
                    await storageManager.addProductsBulk(products);
                    
                    let message = `${products.length}ä»¶ã®å•†å“ã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆã—ã¾ã—ãŸ`;
                    if (errors.length > 0) {
                        message += `\n\nâš ï¸ ${errors.length}ä»¶ã®ã‚¨ãƒ©ãƒ¼ãŒã‚ã‚Šã¾ã—ãŸ:\n${errors.slice(0, 5).join('\n')}`;
                        if (errors.length > 5) {
                            message += `\n... ä»–${errors.length - 5}ä»¶`;
                        }
                    }
                    
                    alert(message);
                    closeImportDialog();
                    displayProducts(); // ãƒªã‚¹ãƒˆã‚’æ›´æ–°
                    
                } catch (error) {
                    console.error('Import error:', error);
                    alert('ã‚¤ãƒ³ãƒãƒ¼ãƒˆã‚¨ãƒ©ãƒ¼: ' + error.message);
                } finally {
                    // ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è§£é™¤
                    const button = document.querySelector('#import-dialog button[onclick="importCSV()"]');
                    if (button) {
                        button.textContent = 'ã‚¤ãƒ³ãƒãƒ¼ãƒˆ';
                        button.disabled = false;
                    }
                }
            }

            // CSVè¡Œã‚’ãƒ‘ãƒ¼ã‚¹
            function parseCSVLine(line) {
                const values = [];
                let current = '';
                let inQuotes = false;
                
                for (let i = 0; i < line.length; i++) {
                    const char = line[i];
                    
                    if (char === '"') {
                        if (inQuotes && line[i + 1] === '"') {
                            current += '"';
                            i++;
                        } else {
                            inQuotes = !inQuotes;
                        }
                    } else if (char === ',' && !inQuotes) {
                        values.push(current.trim());
                        current = '';
                    } else {
                        current += char;
                    }
                }
                
                values.push(current.trim());
                return values;
            }

            // SKUç”Ÿæˆé–¢æ•°ï¼ˆæ—¥ä»˜ãƒ™ãƒ¼ã‚¹ï¼‰
            function generateSKU() {
                const date = new Date();
                const year = date.getFullYear().toString().slice(-2);
                const month = (date.getMonth() + 1).toString().padStart(2, '0');
                const day = date.getDate().toString().padStart(2, '0');
                const random = Math.floor(Math.random() * 1000).toString().padStart(3, '0');
                return `ST-${year}${month}${day}-${random}`;
            }

            // ãƒ©ãƒ³ãƒ€ãƒ SKUç”Ÿæˆé–¢æ•°ï¼ˆæœªå…¥åŠ›æ™‚ç”¨ï¼‰
            function generateRandomSKU() {
                const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';
                let result = 'ST-';
                for (let i = 0; i < 8; i++) {
                    result += chars.charAt(Math.floor(Math.random() * chars.length));
                }
                return result;
            }

            // å£²ã‚Šåˆ‡ã‚ŒçŠ¶æ…‹ã‚’ãƒˆã‚°ãƒ«
            async function toggleSoldOut(id) {
                try {
                    const products = storageManager.getProducts();
                    const product = products.find(p => p.id === id);
                    if (!product) return;

                    const updatedProduct = {
                        ...product,
                        soldOut: !product.soldOut,
                        status: !product.soldOut ? 'soldout' : (product.stock > 0 ? 'active' : 'outofstock')
                    };

                    await storageManager.updateProduct(id, updatedProduct);
                    displayProducts(); // ãƒªã‚¹ãƒˆã‚’æ›´æ–°
                } catch (error) {
                    console.error('Toggle sold out error:', error);
                    alert('çŠ¶æ…‹ã®å¤‰æ›´ã«å¤±æ•—ã—ã¾ã—ãŸ');
                }
            }

            // å•†å“ã‚’å‰Šé™¤
            async function deleteProduct(id) {
                if (confirm('ã“ã®å•†å“ã‚’å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ')) {
                    try {
                        const products = storageManager.getProducts();
                        const product = products.find(p => p.id === id);

                        // Firebase Storageã‹ã‚‰ç”»åƒã‚’å‰Šé™¤
                        if (product && product.imageUrl && product.imageUrl !== '/images/products/placeholder.jpg' && imageUploader) {
                            await imageUploader.deleteImage(product.imageUrl);
                        }

                        // ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‹ã‚‰å•†å“ã‚’å‰Šé™¤
                        await storageManager.deleteProduct(id);
                        alert('å•†å“ã‚’å‰Šé™¤ã—ã¾ã—ãŸ');
                    } catch (error) {
                        console.error('Delete error:', error);
                        alert('å‰Šé™¤ã«å¤±æ•—ã—ã¾ã—ãŸ');
                    }
                }
            }

            // å•†å“ã‚’ç·¨é›†ï¼ˆãƒ•ã‚©ãƒ¼ãƒ è¡¨ç¤ºãŒå¿…è¦ãªå ´åˆã¯å…ƒã®admin.htmlã«ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆï¼‰
            function editProduct(id) {
                // ç·¨é›†ã¯å…ƒã®admin.htmlã§è¡Œã†
                window.location.href = `admin.html#edit-${id}`;
            }

            // ä¸€æ‹¬å£²ã‚Šåˆ‡ã‚Œè¨­å®š
            async function bulkMarkSoldOut() {
                const confirmed = confirm('ç¾åœ¨ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ã•ã‚Œã¦ã„ã‚‹å•†å“ã‚’ã™ã¹ã¦å£²ã‚Šåˆ‡ã‚Œã«ã—ã¾ã™ã‹ï¼Ÿ');
                if (!confirmed) return;

                try {
                    const filteredProducts = storageManager.getFilteredProducts();
                    const availableProducts = filteredProducts.filter(p => !p.soldOut);
                    
                    if (availableProducts.length === 0) {
                        alert('å£²ã‚Šåˆ‡ã‚Œå¯¾è±¡ã®å•†å“ãŒã‚ã‚Šã¾ã›ã‚“');
                        return;
                    }

                    for (const product of availableProducts) {
                        const updatedProduct = {
                            ...product,
                            soldOut: true,
                            status: 'soldout'
                        };
                        await storageManager.updateProduct(product.id, updatedProduct);
                    }

                    alert(`${availableProducts.length}ä»¶ã®å•†å“ã‚’å£²ã‚Šåˆ‡ã‚Œã«ã—ã¾ã—ãŸ`);
                    displayProducts();
                } catch (error) {
                    console.error('Bulk sold out error:', error);
                    alert('ä¸€æ‹¬å£²ã‚Šåˆ‡ã‚Œå‡¦ç†ã«å¤±æ•—ã—ã¾ã—ãŸ');
                }
            }

            // æœªè¨­å®šSKUè‡ªå‹•ç”Ÿæˆ
            async function generateMissingSKUs() {
                const confirmed = confirm('SKUãŒæœªè¨­å®šã®å•†å“ã«è‡ªå‹•ã§SKUã‚’å‰²ã‚Šå½“ã¦ã¾ã™ã‹ï¼Ÿ');
                if (!confirmed) return;

                try {
                    const allProducts = storageManager.getProducts();
                    const noSkuProducts = allProducts.filter(p => !p.sku || p.sku.trim() === '');
                    
                    if (noSkuProducts.length === 0) {
                        alert('SKUæœªè¨­å®šã®å•†å“ã¯ã‚ã‚Šã¾ã›ã‚“');
                        return;
                    }

                    for (const product of noSkuProducts) {
                        const updatedProduct = {
                            ...product,
                            sku: generateRandomSKU()
                        };
                        await storageManager.updateProduct(product.id, updatedProduct);
                    }

                    alert(`${noSkuProducts.length}ä»¶ã®å•†å“ã«SKUã‚’è‡ªå‹•ç”Ÿæˆã—ã¾ã—ãŸ`);
                    displayProducts();
                } catch (error) {
                    console.error('SKU generation error:', error);
                    alert('SKUè‡ªå‹•ç”Ÿæˆã«å¤±æ•—ã—ã¾ã—ãŸ');
                }
            }

            // åœ¨åº«ç®¡ç†ç”»é¢è¡¨ç¤º
            function showStockManagement() {
                const allProducts = storageManager.getProducts();
                
                // åœ¨åº«çŠ¶æ³åˆ¥ã«åˆ†é¡
                const stockStatus = {
                    outOfStock: allProducts.filter(p => !p.soldOut && (p.stock === 0 || !p.stock)),
                    lowStock: allProducts.filter(p => !p.soldOut && p.stock > 0 && p.stock <= 3),
                    normal: allProducts.filter(p => !p.soldOut && p.stock > 3),
                    soldOut: allProducts.filter(p => p.soldOut)
                };

                const modalHtml = `
                    <div id="stock-modal" class="fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4">
                        <div class="bg-white rounded-lg max-w-4xl w-full max-h-[80vh] overflow-y-auto">
                            <div class="p-6 border-b">
                                <div class="flex justify-between items-center">
                                    <h3 class="text-xl font-semibold">åœ¨åº«ç®¡ç†</h3>
                                    <button onclick="closeStockModal()" class="text-gray-400 hover:text-gray-600">
                                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                                        </svg>
                                    </button>
                                </div>
                            </div>
                            <div class="p-6">
                                <!-- åœ¨åº«çµ±è¨ˆ -->
                                <div class="grid grid-cols-4 gap-4 mb-6">
                                    <div class="text-center p-4 bg-red-50 rounded-lg">
                                        <div class="text-2xl font-bold text-red-600">${stockStatus.outOfStock.length}</div>
                                        <div class="text-sm text-gray-600">åœ¨åº«åˆ‡ã‚Œ</div>
                                    </div>
                                    <div class="text-center p-4 bg-yellow-50 rounded-lg">
                                        <div class="text-2xl font-bold text-yellow-600">${stockStatus.lowStock.length}</div>
                                        <div class="text-sm text-gray-600">å°‘åœ¨åº«(1-3)</div>
                                    </div>
                                    <div class="text-center p-4 bg-green-50 rounded-lg">
                                        <div class="text-2xl font-bold text-green-600">${stockStatus.normal.length}</div>
                                        <div class="text-sm text-gray-600">ååˆ†åœ¨åº«</div>
                                    </div>
                                    <div class="text-center p-4 bg-gray-50 rounded-lg">
                                        <div class="text-2xl font-bold text-gray-600">${stockStatus.soldOut.length}</div>
                                        <div class="text-sm text-gray-600">å£²ã‚Šåˆ‡ã‚Œ</div>
                                    </div>
                                </div>

                                <!-- åœ¨åº«åˆ‡ã‚Œå•†å“ -->
                                ${stockStatus.outOfStock.length > 0 ? `
                                <div class="mb-6">
                                    <h4 class="font-semibold text-red-600 mb-3">åœ¨åº«åˆ‡ã‚Œå•†å“ (${stockStatus.outOfStock.length}ä»¶)</h4>
                                    <div class="space-y-2 max-h-40 overflow-y-auto">
                                        ${stockStatus.outOfStock.map(product => `
                                            <div class="flex justify-between items-center p-3 bg-red-50 rounded">
                                                <span class="font-medium">${product.title}</span>
                                                <input type="number" min="1" max="999" placeholder="åœ¨åº«æ•°" 
                                                       class="w-20 px-2 py-1 border rounded text-sm"
                                                       onchange="updateStock('${product.id}', this.value)">
                                            </div>
                                        `).join('')}
                                    </div>
                                </div>
                                ` : ''}

                                <!-- å°‘åœ¨åº«å•†å“ -->
                                ${stockStatus.lowStock.length > 0 ? `
                                <div class="mb-6">
                                    <h4 class="font-semibold text-yellow-600 mb-3">å°‘åœ¨åº«å•†å“ (${stockStatus.lowStock.length}ä»¶)</h4>
                                    <div class="space-y-2 max-h-40 overflow-y-auto">
                                        ${stockStatus.lowStock.map(product => `
                                            <div class="flex justify-between items-center p-3 bg-yellow-50 rounded">
                                                <span class="font-medium">${product.title}</span>
                                                <div class="flex items-center gap-2">
                                                    <span class="text-sm text-gray-600">ç¾åœ¨: ${product.stock}</span>
                                                    <input type="number" min="1" max="999" value="${product.stock}"
                                                           class="w-20 px-2 py-1 border rounded text-sm"
                                                           onchange="updateStock('${product.id}', this.value)">
                                                </div>
                                            </div>
                                        `).join('')}
                                    </div>
                                </div>
                                ` : ''}

                                <div class="flex gap-2">
                                    <button onclick="bulkSetStock()" class="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700">
                                        ä¸€æ‹¬åœ¨åº«è¨­å®š
                                    </button>
                                    <button onclick="closeStockModal()" class="px-4 py-2 border border-gray-300 rounded hover:bg-gray-50">
                                        é–‰ã˜ã‚‹
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                `;

                document.body.insertAdjacentHTML('beforeend', modalHtml);
            }

            // ä¾¡æ ¼ç®¡ç†ç”»é¢è¡¨ç¤º
            function showPriceManagement() {
                const allProducts = storageManager.getProducts();
                
                // ä¾¡æ ¼å¸¯åˆ¥åˆ†æ
                const priceRanges = {
                    under1000: allProducts.filter(p => p.price && p.price < 1000),
                    range1000to5000: allProducts.filter(p => p.price && p.price >= 1000 && p.price < 5000),
                    range5000to10000: allProducts.filter(p => p.price && p.price >= 5000 && p.price < 10000),
                    over10000: allProducts.filter(p => p.price && p.price >= 10000),
                    negotiable: allProducts.filter(p => p.negotiable),
                    noPrice: allProducts.filter(p => !p.price && !p.negotiable)
                };

                const modalHtml = `
                    <div id="price-modal" class="fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4">
                        <div class="bg-white rounded-lg max-w-4xl w-full max-h-[80vh] overflow-y-auto">
                            <div class="p-6 border-b">
                                <div class="flex justify-between items-center">
                                    <h3 class="text-xl font-semibold">ä¾¡æ ¼ç®¡ç†</h3>
                                    <button onclick="closePriceModal()" class="text-gray-400 hover:text-gray-600">
                                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                                        </svg>
                                    </button>
                                </div>
                            </div>
                            <div class="p-6">
                                <!-- ä¾¡æ ¼å¸¯çµ±è¨ˆ -->
                                <div class="grid grid-cols-3 gap-4 mb-6">
                                    <div class="text-center p-4 bg-green-50 rounded-lg">
                                        <div class="text-2xl font-bold text-green-600">${priceRanges.under1000.length}</div>
                                        <div class="text-sm text-gray-600">1,000å††æœªæº€</div>
                                    </div>
                                    <div class="text-center p-4 bg-blue-50 rounded-lg">
                                        <div class="text-2xl font-bold text-blue-600">${priceRanges.range1000to5000.length}</div>
                                        <div class="text-sm text-gray-600">1,000-5,000å††</div>
                                    </div>
                                    <div class="text-center p-4 bg-purple-50 rounded-lg">
                                        <div class="text-2xl font-bold text-purple-600">${priceRanges.range5000to10000.length}</div>
                                        <div class="text-sm text-gray-600">5,000-10,000å††</div>
                                    </div>
                                    <div class="text-center p-4 bg-red-50 rounded-lg">
                                        <div class="text-2xl font-bold text-red-600">${priceRanges.over10000.length}</div>
                                        <div class="text-sm text-gray-600">10,000å††ä»¥ä¸Š</div>
                                    </div>
                                    <div class="text-center p-4 bg-yellow-50 rounded-lg">
                                        <div class="text-2xl font-bold text-yellow-600">${priceRanges.negotiable.length}</div>
                                        <div class="text-sm text-gray-600">å¿œç›¸è«‡</div>
                                    </div>
                                    <div class="text-center p-4 bg-gray-50 rounded-lg">
                                        <div class="text-2xl font-bold text-gray-600">${priceRanges.noPrice.length}</div>
                                        <div class="text-sm text-gray-600">ä¾¡æ ¼æœªè¨­å®š</div>
                                    </div>
                                </div>

                                <!-- ä¸€æ‹¬ä¾¡æ ¼æ“ä½œ -->
                                <div class="bg-gray-50 rounded-lg p-4 mb-6">
                                    <h4 class="font-semibold mb-3">ä¸€æ‹¬ä¾¡æ ¼å¤‰æ›´</h4>
                                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                        <div>
                                            <label class="block text-sm font-medium mb-1">ä¾¡æ ¼ç¯„å›²</label>
                                            <select id="priceRangeSelect" class="w-full px-3 py-2 border rounded">
                                                <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
                                                <option value="under1000">1,000å††æœªæº€</option>
                                                <option value="range1000to5000">1,000-5,000å††</option>
                                                <option value="range5000to10000">5,000-10,000å††</option>
                                                <option value="over10000">10,000å††ä»¥ä¸Š</option>
                                            </select>
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium mb-1">æ“ä½œ</label>
                                            <div class="flex gap-2">
                                                <select id="priceOperationType" class="px-3 py-2 border rounded">
                                                    <option value="multiply">å€ç‡</option>
                                                    <option value="add">åŠ ç®—</option>
                                                    <option value="set">è¨­å®š</option>
                                                </select>
                                                <input type="number" id="priceOperationValue" class="flex-1 px-3 py-2 border rounded" placeholder="å€¤">
                                                <button onclick="bulkPriceChange()" class="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700">
                                                    å®Ÿè¡Œ
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- ä¾¡æ ¼æœªè¨­å®šå•†å“ -->
                                ${priceRanges.noPrice.length > 0 ? `
                                <div class="mb-6">
                                    <h4 class="font-semibold text-gray-600 mb-3">ä¾¡æ ¼æœªè¨­å®šå•†å“ (${priceRanges.noPrice.length}ä»¶)</h4>
                                    <div class="space-y-2 max-h-40 overflow-y-auto">
                                        ${priceRanges.noPrice.map(product => `
                                            <div class="flex justify-between items-center p-3 bg-gray-50 rounded">
                                                <span class="font-medium">${product.title}</span>
                                                <div class="flex items-center gap-2">
                                                    <input type="number" min="1" placeholder="ä¾¡æ ¼"
                                                           class="w-24 px-2 py-1 border rounded text-sm"
                                                           onchange="updatePrice('${product.id}', this.value)">
                                                    <label class="flex items-center text-sm">
                                                        <input type="checkbox" class="mr-1" onchange="toggleNegotiable('${product.id}', this.checked)">
                                                        å¿œç›¸è«‡
                                                    </label>
                                                </div>
                                            </div>
                                        `).join('')}
                                    </div>
                                </div>
                                ` : ''}

                                <button onclick="closePriceModal()" class="px-4 py-2 border border-gray-300 rounded hover:bg-gray-50">
                                    é–‰ã˜ã‚‹
                                </button>
                            </div>
                        </div>
                    </div>
                `;

                document.body.insertAdjacentHTML('beforeend', modalHtml);
            }

            // ãƒ‡ãƒ¼ã‚¿æ•´ç†æ©Ÿèƒ½
            async function cleanupProducts() {
                const confirmed = confirm('ãƒ‡ãƒ¼ã‚¿æ•´ç†ã‚’å®Ÿè¡Œã—ã¾ã™ã‹ï¼Ÿ\nãƒ»é‡è¤‡å•†å“ã®æ¤œå‡º\nãƒ»ä¸è¦ãƒ‡ãƒ¼ã‚¿ã®å‰Šé™¤\nãƒ»ãƒ‡ãƒ¼ã‚¿ã®æ­£è¦åŒ–');
                if (!confirmed) return;

                try {
                    const allProducts = storageManager.getProducts();
                    let cleanupCount = 0;

                    // é‡è¤‡ã‚¿ã‚¤ãƒˆãƒ«ã‚’ãƒã‚§ãƒƒã‚¯
                    const titleMap = new Map();
                    const duplicates = [];
                    
                    allProducts.forEach(product => {
                        const title = product.title?.toLowerCase().trim();
                        if (title) {
                            if (titleMap.has(title)) {
                                duplicates.push(product);
                            } else {
                                titleMap.set(title, product);
                            }
                        }
                    });

                    // ç©ºã®ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’æ•´ç†
                    for (const product of allProducts) {
                        let needsUpdate = false;
                        const updatedProduct = { ...product };

                        // ç©ºæ–‡å­—åˆ—ã‚’nullã«å¤‰æ›
                        if (updatedProduct.description === '') {
                            updatedProduct.description = null;
                            needsUpdate = true;
                        }
                        if (updatedProduct.category === '') {
                            updatedProduct.category = 'æœªåˆ†é¡';
                            needsUpdate = true;
                        }
                        // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆåœ¨åº«æ•°è¨­å®š
                        if (!updatedProduct.stock || updatedProduct.stock < 0) {
                            updatedProduct.stock = 1;
                            needsUpdate = true;
                        }

                        if (needsUpdate) {
                            await storageManager.updateProduct(product.id, updatedProduct);
                            cleanupCount++;
                        }
                    }

                    let message = `ãƒ‡ãƒ¼ã‚¿æ•´ç†å®Œäº†:\nãƒ»${cleanupCount}ä»¶ã®ãƒ‡ãƒ¼ã‚¿ã‚’ä¿®æ­£`;
                    if (duplicates.length > 0) {
                        message += `\nãƒ»${duplicates.length}ä»¶ã®é‡è¤‡å•†å“ã‚’æ¤œå‡ºï¼ˆæ‰‹å‹•ç¢ºèªãŒå¿…è¦ï¼‰`;
                    }
                    alert(message);
                    displayProducts();
                } catch (error) {
                    console.error('Cleanup error:', error);
                    alert('ãƒ‡ãƒ¼ã‚¿æ•´ç†ã«å¤±æ•—ã—ã¾ã—ãŸ');
                }
            }

            // åœ¨åº«ç®¡ç†ãƒ¢ãƒ¼ãƒ€ãƒ«é–¢æ•°
            function closeStockModal() {
                const modal = document.getElementById('stock-modal');
                if (modal) {
                    modal.remove();
                }
            }

            async function updateStock(productId, newStock) {
                try {
                    const stock = parseInt(newStock);
                    if (isNaN(stock) || stock < 0) {
                        alert('æ­£ã—ã„åœ¨åº«æ•°ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„');
                        return;
                    }

                    const products = storageManager.getProducts();
                    const product = products.find(p => p.id === productId);
                    if (!product) return;

                    const updatedProduct = {
                        ...product,
                        stock: stock,
                        status: product.soldOut ? 'soldout' : (stock > 0 ? 'active' : 'outofstock')
                    };

                    await storageManager.updateProduct(productId, updatedProduct);
                } catch (error) {
                    console.error('Update stock error:', error);
                    alert('åœ¨åº«æ•°ã®æ›´æ–°ã«å¤±æ•—ã—ã¾ã—ãŸ');
                }
            }

            async function bulkSetStock() {
                const stockValue = prompt('ä¸€æ‹¬è¨­å®šã™ã‚‹åœ¨åº«æ•°ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„:');
                if (!stockValue) return;

                const stock = parseInt(stockValue);
                if (isNaN(stock) || stock < 0) {
                    alert('æ­£ã—ã„åœ¨åº«æ•°ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„');
                    return;
                }

                const confirmed = confirm(`åœ¨åº«åˆ‡ã‚Œãƒ»å°‘åœ¨åº«å•†å“ã®åœ¨åº«æ•°ã‚’ ${stock} ã«è¨­å®šã—ã¾ã™ã‹ï¼Ÿ`);
                if (!confirmed) return;

                try {
                    const allProducts = storageManager.getProducts();
                    const targetProducts = allProducts.filter(p => !p.soldOut && (p.stock === 0 || p.stock <= 3));

                    for (const product of targetProducts) {
                        const updatedProduct = {
                            ...product,
                            stock: stock,
                            status: 'active'
                        };
                        await storageManager.updateProduct(product.id, updatedProduct);
                    }

                    alert(`${targetProducts.length}ä»¶ã®å•†å“ã®åœ¨åº«æ•°ã‚’æ›´æ–°ã—ã¾ã—ãŸ`);
                    closeStockModal();
                    displayProducts();
                } catch (error) {
                    console.error('Bulk stock update error:', error);
                    alert('ä¸€æ‹¬åœ¨åº«æ›´æ–°ã«å¤±æ•—ã—ã¾ã—ãŸ');
                }
            }

            // ä¾¡æ ¼ç®¡ç†ãƒ¢ãƒ¼ãƒ€ãƒ«é–¢æ•°
            function closePriceModal() {
                const modal = document.getElementById('price-modal');
                if (modal) {
                    modal.remove();
                }
            }

            async function updatePrice(productId, newPrice) {
                try {
                    const price = parseFloat(newPrice);
                    if (isNaN(price) || price < 0) {
                        alert('æ­£ã—ã„ä¾¡æ ¼ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„');
                        return;
                    }

                    const products = storageManager.getProducts();
                    const product = products.find(p => p.id === productId);
                    if (!product) return;

                    const updatedProduct = {
                        ...product,
                        price: price,
                        priceText: `Â¥${price.toLocaleString()}`,
                        negotiable: false
                    };

                    await storageManager.updateProduct(productId, updatedProduct);
                } catch (error) {
                    console.error('Update price error:', error);
                    alert('ä¾¡æ ¼ã®æ›´æ–°ã«å¤±æ•—ã—ã¾ã—ãŸ');
                }
            }

            async function toggleNegotiable(productId, isNegotiable) {
                try {
                    const products = storageManager.getProducts();
                    const product = products.find(p => p.id === productId);
                    if (!product) return;

                    const updatedProduct = {
                        ...product,
                        negotiable: isNegotiable,
                        priceText: isNegotiable ? 'å¿œç›¸è«‡' : (product.price ? `Â¥${product.price.toLocaleString()}` : 'ä¾¡æ ¼æœªè¨­å®š')
                    };

                    if (isNegotiable) {
                        updatedProduct.price = null;
                    }

                    await storageManager.updateProduct(productId, updatedProduct);
                } catch (error) {
                    console.error('Toggle negotiable error:', error);
                    alert('å¿œç›¸è«‡ãƒ•ãƒ©ã‚°ã®å¤‰æ›´ã«å¤±æ•—ã—ã¾ã—ãŸ');
                }
            }

            async function bulkPriceChange() {
                const rangeSelect = document.getElementById('priceRangeSelect');
                const operationType = document.getElementById('priceOperationType');
                const operationValue = document.getElementById('priceOperationValue');

                const range = rangeSelect.value;
                const operation = operationType.value;
                const value = parseFloat(operationValue.value);

                if (!range || !operation || isNaN(value)) {
                    alert('ã™ã¹ã¦ã®é …ç›®ã‚’æ­£ã—ãå…¥åŠ›ã—ã¦ãã ã•ã„');
                    return;
                }

                const confirmed = confirm(`ä¾¡æ ¼ç¯„å›²ã€Œ${rangeSelect.options[rangeSelect.selectedIndex].text}ã€ã®å•†å“ã«å¯¾ã—ã¦ã€${operation === 'multiply' ? 'å€ç‡' : operation === 'add' ? 'åŠ ç®—' : 'è¨­å®š'}: ${value} ã‚’å®Ÿè¡Œã—ã¾ã™ã‹ï¼Ÿ`);
                if (!confirmed) return;

                try {
                    const allProducts = storageManager.getProducts();
                    let targetProducts = [];

                    // ä¾¡æ ¼ç¯„å›²ã§ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼
                    switch (range) {
                        case 'under1000':
                            targetProducts = allProducts.filter(p => p.price && p.price < 1000);
                            break;
                        case 'range1000to5000':
                            targetProducts = allProducts.filter(p => p.price && p.price >= 1000 && p.price < 5000);
                            break;
                        case 'range5000to10000':
                            targetProducts = allProducts.filter(p => p.price && p.price >= 5000 && p.price < 10000);
                            break;
                        case 'over10000':
                            targetProducts = allProducts.filter(p => p.price && p.price >= 10000);
                            break;
                    }

                    for (const product of targetProducts) {
                        let newPrice = product.price;
                        
                        switch (operation) {
                            case 'multiply':
                                newPrice = Math.round(product.price * value);
                                break;
                            case 'add':
                                newPrice = Math.round(product.price + value);
                                break;
                            case 'set':
                                newPrice = Math.round(value);
                                break;
                        }

                        const updatedProduct = {
                            ...product,
                            price: newPrice,
                            priceText: `Â¥${newPrice.toLocaleString()}`
                        };

                        await storageManager.updateProduct(product.id, updatedProduct);
                    }

                    alert(`${targetProducts.length}ä»¶ã®å•†å“ã®ä¾¡æ ¼ã‚’æ›´æ–°ã—ã¾ã—ãŸ`);
                    closePriceModal();
                    displayProducts();
                } catch (error) {
                    console.error('Bulk price change error:', error);
                    alert('ä¸€æ‹¬ä¾¡æ ¼å¤‰æ›´ã«å¤±æ•—ã—ã¾ã—ãŸ');
                }
            }

            // å•†å“ç™»éŒ²ãƒ•ã‚©ãƒ¼ãƒ é–¢æ•°
            function toggleProductForm() {
                const section = document.getElementById('product-form-section');
                const button = document.querySelector('button[onclick="toggleProductForm()"]');
                
                if (section.classList.contains('hidden')) {
                    section.classList.remove('hidden');
                    button.textContent = 'ãƒ•ã‚©ãƒ¼ãƒ ã‚’é–‰ã˜ã‚‹';
                } else {
                    section.classList.add('hidden');
                    button.textContent = 'æ–°å•†å“ã‚’ç™»éŒ²';
                }
            }

            function resetForm() {
                document.getElementById('product-form').reset();
                document.getElementById('generated-sku').textContent = generateSKU();
                document.getElementById('image-preview').innerHTML = '<p class="text-gray-500">ç”»åƒã‚’ãƒ‰ãƒ©ãƒƒã‚°ï¼†ãƒ‰ãƒ­ãƒƒãƒ—ã¾ãŸã¯ã‚¯ãƒªãƒƒã‚¯ã—ã¦é¸æŠ</p>';
                updateSubCategories();
            }

            function updateSubCategories() {
                const mainCategory = document.getElementById('category').value;
                const subCategorySelect = document.getElementById('sub-category');
                
                subCategorySelect.innerHTML = '<option value="">ã‚µãƒ–ã‚«ãƒ†ã‚´ãƒªãƒ¼ã‚’é¸æŠ</option>';
                
                if (mainCategory && categoryData[mainCategory]) {
                    categoryData[mainCategory].forEach(subCat => {
                        const option = document.createElement('option');
                        option.value = subCat;
                        option.textContent = subCat;
                        subCategorySelect.appendChild(option);
                    });
                }
            }

            async function handleProductSubmit(event) {
                event.preventDefault();
                
                try {
                    const formData = new FormData(event.target);
                    const category = formData.get('category');
                    const subCategory = formData.get('sub-category');
                    const fullCategory = subCategory ? `${category} > ${subCategory}` : category;
                    
                    const price = parseFloat(formData.get('price'));
                    const negotiable = formData.get('negotiable') === 'on';
                    
                    const product = {
                        id: Date.now().toString() + Math.random().toString(36).substr(2, 9),
                        sku: formData.get('sku') || generateSKU(),
                        title: formData.get('title'),
                        price: negotiable ? null : (isNaN(price) ? null : price),
                        priceText: negotiable ? 'å¿œç›¸è«‡' : (isNaN(price) ? 'ä¾¡æ ¼æœªè¨­å®š' : `Â¥${price.toLocaleString()}`),
                        category: fullCategory,
                        description: formData.get('description'),
                        stock: parseInt(formData.get('stock')) || 1,
                        negotiable: negotiable,
                        status: 'active',
                        isNew: true,
                        soldOut: false,
                        created_at: new Date().toISOString().split('T')[0],
                        imageUrl: '/images/products/placeholder.jpg'
                    };

                    await storageManager.addProduct(product);
                    alert('å•†å“ã‚’ç™»éŒ²ã—ã¾ã—ãŸ');
                    resetForm();
                    displayProducts();
                    
                } catch (error) {
                    console.error('Product submit error:', error);
                    alert('å•†å“ç™»éŒ²ã«å¤±æ•—ã—ã¾ã—ãŸ');
                }
            }
        </script>

        <footer class="bg-gray-100 mt-12">
            <div class="container mx-auto px-4 py-8">
                <div class="bg-gray-800 text-white py-4 rounded-lg">
                    <div class="text-center">
                        <p class="text-sm">Â© 2024 <a href="index.html" class="text-white hover:text-red-300 transition-colors underline decoration-transparent hover:decoration-red-300">ãƒ¯ãƒ¼ãƒ«ãƒ‰ã‚¹ã‚¿ãƒ³ãƒ—åºƒå³¶</a> All Rights Reserved.</p>
                        <p class="text-xs mt-2">
                            <a href="admin-login.html" class="text-gray-400 hover:text-gray-300">ç®¡ç†è€…ãƒ­ã‚°ã‚¤ãƒ³</a>
                        </p>
                    </div>
                </div>
            </div>
        </footer>
    </body>
</html>